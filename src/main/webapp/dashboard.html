
<!DOCTYPE html>
<html ng-app="metrics">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Dashboard</title>

    <script src="lib/jquery-1.9.1.js" type="text/javascript"></script>
     <script src="lib/highcharts.js"></script>
    <script src="lib/angular/angular.min.js"></script>
    <style>
.ng-invalid {
    border: 1px solid red;
}

body {
    padding:10px;
}

#container {
    margin:0 auto;
    width:210px;
}
</style>
<script type='text/javascript'>//<![CDATA[
'use strict';

angular.module('metrics', ['metrics.directives']);

function stageController($scope) {

    $scope.type = 'Browser Market Share';
    $scope.initData = function () {
        $scope.data = [
            ['Chrome', 47.0],
            ['Firefox', 33.0],
            ['IE', 20.0]
        ];
    }
    $scope.initData();
}

angular.module('metrics.directives', []).
        directive('drawPieChart', function () {
            return function (scope, element, attrs) {
                var container = $(element).attr("id");
                // watch the expression, and update the UI on change.
                scope.$watch('data', function () {
                    drawPlot();
                }, true);

                var drawPlot = function () {
                    var chart;
                    chart = new Highcharts.Chart({
                        chart: {
                            renderTo: container
                        },
                        credits: {
                            enabled: false
                        },
                        title: {
                            text: ''
                        },
                        tooltip: {
                            pointFormat: '{series.name}: <b>{point.percentage}%</b>',
                            percentageDecimals: 1
                        },
                        plotOptions: {
                            pie: {
                                dataLabels: {
                                    enabled: false
                                }
                            }
                        },
                        series: [{
                            type: 'pie',
                            name: 'Browser share',
                            data: scope.data
                        }]
                    });
                }
            }
        });
//]]>
</script>
</head>
<body ng-controller="stageController">
    <div id="container" draw-pie-chart=""></div>
</body>
</html>

